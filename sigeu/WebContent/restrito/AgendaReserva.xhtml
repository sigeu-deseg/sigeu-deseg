<ui:composition template="/WEB-INF/template/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://openfaces.org/">

	<ui:define name="titulo">SIGEU: Agenda de Reservas</ui:define>

	<ui:define name="corpo">
		<p:tabView styleClass="tabCentered">
			<p:tab id="tabPesquisa" title="Agenda de Reservas">
				<h:form id="frmAgendaReserva" prependId="false">
					<div style="margin: 0 auto; text-align: center">
						<p:panelGrid columns="12" style="margin: 0 auto">
							<p:outputLabel value="Período de" for="data" />
							<p:calendar label="Data da Reserva" id="data"
								value="#{agendaReservaBean.data}" size="10" pattern="dd/MM/yyyy"
								mask="true" required="true" requiredMessage="Preencha a data"
								locale="pt">
								<p:ajax event="dateSelect"
									listener="#{agendaReservaBean.checkPeriodo}" update="data2" />
							</p:calendar>

							<p:outputLabel value="até" for="data2" />
							<p:calendar label="Data da Reserva" id="data2"
								value="#{agendaReservaBean.data2}" size="10"
								pattern="dd/MM/yyyy" mask="true" required="true"
								requiredMessage="Preencha a data" locale="pt" />

							<p:outputLabel value="  Tipo" for="item" />
							<p:selectOneMenu id="tipoReserva"
								value="#{agendaReservaBean.tipoReserva}" required="false"
								requiredMessage="Informe o tipo de reserva."
								converter="tipoReservaConverter">
								<f:selectItem itemLabel="Selecionar" itemValue="" />
								<f:selectItems value="#{agendaReservaBean.listaTipoReserva}"
									var="i" itemLabel="#{i.descricao}" itemValue="#{i.descricao}" />
							</p:selectOneMenu>

							<p:outputLabel value="  Recurso" for="item" />
							<p:autoComplete id="item" forceSelection="true"
								value="#{agendaReservaBean.campoItem}"
								completeMethod="#{agendaReservaBean.selecionaItem}"
								required="false" minQueryLength="2" queryDelay="250" size="16"
								requiredMessage="Informe o recurso">
								<p:ajax event="itemSelect"
									listener="#{agendaReservaBean.defineItem}" update="item" />
							</p:autoComplete>

							<p:outputLabel value="  Motivo" for="motivo" />
							<p:inputText id="motivo"
								value="#{agendaReservaBean.motivo}" size="20"
								maxlength="200" />

							<p:outputLabel value="  Usuário" for="nomeUsuario" />
							<p:inputText id="nomeUsuario"
								value="#{agendaReservaBean.nomeUsuario}" size="20"
								maxlength="200" />

						</p:panelGrid>

						<p:commandButton value="Pesquisar" icon="ui-icon-search"
							style="width:100px; margin: 0 auto; margin-top: 10px;"
							action="#{agendaReservaBean.pesquisa}" update="@form" />

					</div>

					<p:dataTable value="#{agendaReservaBean.listaReservaVO}" var="r"
						paginator="false" emptyMessage="Nenhuma reserva encontrada"
						style="margin-top: 20px;">

						<p:column headerText="ID"
							style="background-color: #{r.cor}; text-align: center; width: 40px">
							<h:outputText value="#{r.idReserva}" />
						</p:column>

						<p:column headerText="Recurso" style="width: 120px">
							<h:outputText value="#{r.nomeItemReserva}" />
						</p:column>

						<p:column headerText="Tipo de Reserva"
							style="text-align: center; width: 100px">
							<h:outputText value="#{r.tipoReserva}" />
						</p:column>

						<p:column headerText="Motivo">
							<h:outputText value="#{r.motivoReserva}" />
						</p:column>

						<p:column headerText="Usuário"
							style="text-align: center; width: 200px">
							<h:outputText value="#{r.usuarioReserva}" />
						</p:column>

						<p:column headerText="Dia"
							style="text-align: center;  width: 40px">
							<h:outputText value="#{r.diaSemana}" />
						</p:column>
						
						<p:column headerText="Data"
							style="text-align: center;  width: 80px">
							<h:outputText value="#{r.dataReserva}" />
						</p:column>

						<p:column headerText="Horário"
							style="text-align: center;  width: 80px">
							<h:outputText value="#{r.horaReserva}" />
						</p:column>

					</p:dataTable>

				</h:form>
			</p:tab>
		</p:tabView>
	</ui:define>

</ui:composition>